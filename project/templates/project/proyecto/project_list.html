{% extends 'project/base.html' %}
{% load staticfiles %}
{% block title %}Proyectos{% endblock %}
{% block header %}Proyectos{% endblock %}

{% block content %}
{% if perms.project.add_proyecto %}<p><a href="{% url 'project:project_create' %}" class="fa fa-plus-circle"> Agregar</a></p>{% endif %}
<a href="{% url 'project:project_list_cancelled' %}">Ver Proyectos Cancelados</a>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">Datatables</div>
                <div class="panel-body">
                    <div class="dataTable_wrapper">
                    <table class="table table-striped table-bordered table-hover" id="myTable">
                        <thead>
                            <tr>
                                <th>Nombre Corto</th>
                                <th>Nombre Largo</th>
                                <th>Estado</th>
                                <th>Inicio</th>
                                <th>Fin</th>
                                <th>Ver</th>
                                {% if perms.project.change_proyecto %}<th>Editar</th>{% endif %}
                                {% if perms.project.delete_proyecto %}<th>Eliminar</th>{% endif %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for p in projects %}
                            <tr class="odd gradeX">
                                <td>{{ p.nombre_corto }}</td>
                                <td>{{ p.nombre_largo }}</td>
                                <td>{{ p.get_estado_display }}</td>
                                <td>{{ p.inicio|date:"SHORT_DATE_FORMAT" }}</td>
                                <td>{{ p.fin|date:"SHORT_DATE_FORMAT" }}</td>
                                <td ><a href="{{ p.get_absolute_url }}"><i class="fa fa-eye fa-fw"></i></a> </td>
                                {% if perms.project.change_proyecto %}<td><a href="{% url 'project:project_update' p.id %}"><i class="fa fa-pencil fa-fw"></i></a></td>{% endif %}
                                {% if perms.project.delete_proyecto %}<td><a href="{% url 'project:project_delete' p.id %}"><i class="fa fa-trash-o fa-fw"></i></a></td>{% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- DataTables -->
<script src="{% static 'bower_components/datatables/media/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js' %}"></script>

<script>
$(document).ready(function() {
    $('#myTable').DataTable({
            responsive: true
    });
});
</script>
{% endblock %}